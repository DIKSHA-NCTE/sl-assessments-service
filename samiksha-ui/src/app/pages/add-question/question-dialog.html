<div class="question-dialog">
  <div class="form-group ">
    <mat-form-field class=" col-md-6">
      <input matInput [(ngModel)]="question.parentId" placeholder="Enter Parent External ID">
      <!-- <mat-select placeholder="Select Parent" [(ngModel)]="question.parentId">
        <mat-option *ngFor="let que of questions;let i = index" [value]="que.externalId" [disabled]="que.externalId==question.externalId">{{que.externalId}}</mat-option>
      </mat-select> -->
    </mat-form-field>
    <mat-form-field class=" col-md-3" *ngIf="question.parentId">
      <mat-select placeholder="Visible If" [(ngModel)]="question.visibleIf[0].operator">
        <mat-option value="">N.A.</mat-option>
        <mat-option value="===">Equals</mat-option>
        <mat-option value=">">Greater than</mat-option>
        <mat-option value="!==">Not equal</mat-option>
        <mat-option value=">=">Greater than equal</mat-option>
        <mat-option value="<=">Less than equals</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class=" col-md-3" *ngIf="question.visibleIf[0].operator != '' && question.visibleIf[0].operator">
      <input matInput [(ngModel)]="
      question.visibleIf[0].value" placeholder="Value">
    </mat-form-field>
    <!-- <div class="col-md-2"> -->
    <!-- <mat-input type="text" [(ngModel)]="question.visibleIfValue" placeholder="Value"> -->
    <!-- <mat-input-container floatPlaceholder="auto">
      <input matInput formControlName="formControlName" type="text" required placeholder="">
    </mat-input-container> -->
    <!-- </div> -->
  </div>

  <div class="form-group ">
    <mat-form-field class=" col-md-3">
      <mat-select placeholder="Select Evidence" [(ngModel)]="question.evidenceIndex" (selectionChange)="pushEvidence($event.value)">
        <mat-option *ngFor="let evidence of criteria.evidences;let i = index" [value]="i">{{evidence.name}}</mat-option>
      </mat-select>
    </mat-form-field>
    <!-- </div>

  <div class="form-group col-md-6"> -->
    <mat-form-field class="col-md-6">
      <mat-select placeholder="Select Sections" [(ngModel)]="question.sectionIndex" (selectionChange)="pushEvidenceSections($event.value)">
        <mat-option *ngFor="let section of question.sections; let j=index" [value]="j">{{section.name}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="question.externalId" placeholder="External ID">
  </div>
  <hr>
  <div class="form-group">
    <button type="button" class=" btn btn-outline-dark btn-sm" (click)="addQuestion()">
      Add Question Translation
    </button>

    <div class="form-group mb-3" *ngFor="let option of question.questions ; let i = index">
      <input type="text" class="form-control" [(ngModel)]="question.questions[i].value" placeholder="Question"
        aria-label="Question" aria-describedby="questions">
      <div class="form-group-append">
        <span class="form-group-text question-remove-btn" id="questions" (click)="removeQuestion(i)">Remove</span>
      </div>
    </div>
  </div>

  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="question.tip" placeholder="Question Tip">
  </div>

  <div class="form-group">
    <div class="form-group">
      <label for="responseType">Question Type</label>
      <select class="form-control" [(ngModel)]="question.responseType" id="responseType" (selectionChange)="questionType($event.value)">
        <option value="radio">MCQ-Only one correct</option>
        <option value="multiSelect">MCQ-More than one correct</option>
        <option value="text">Data entry-Text</option>
        <option value="number">Data entry-Number</option>
        <option value="date">Date</option>
        <option value="matrix">Matrix</option>
      </select>
    </div>
  </div>

  <div class="form-group" *ngIf="question.responseType != 'matrix'">
    <button type="button" class=" btn btn-outline-dark btn-sm" (click)="addOption()" *ngIf="['multiSelect','radio'].indexOf(question.responseType)> -1 ">
      Add New Options
    </button>
    <div class="question-options-dev" *ngFor="let option of question.options ; let i = index">
      <div class="row">
        <div class="col">
          <input type="text" class="form-control" [(ngModel)]="question.options[i].value" placeholder="Value">
        </div>
        <div class="col">
          <input type="text" class="form-control" [(ngModel)]="question.options[i].label" placeholder="Label">
        </div>

        <button type="button" class=" btn btn-outline-dark btn-sm" (click)="removeOption(i)" *ngIf="['multiSelect','radio'].indexOf(question.responseType)> -1 ">Remove</button>
      </div>
    </div>
  </div>
  <div class="form-group" *ngIf="question.responseType == 'matrix'">
    <div class="row">
      <div class="col">
        <input type="text" class="form-control" [(ngModel)]="question.instanceIdentifier" placeholder="Instance Identifier">
      </div>
      <div class="col">
        <input type="number" class="form-control" [(ngModel)]="question.noOfInstances" placeholder="Enter no of meetings
    recorded">
      </div>
    </div>
    <br>
    <div class="row">

      <div class="col">
        <textarea class="form-control" placeholder="Select Instance Questions" [(ngModel)]="question.instanceQuestionsString"></textarea>
        <!-- <mat-select placeholder="Select Instance Questions" [(ngModel)]="question.instanceQuestions" multiple>
          <mat-option *ngFor="let que of questions;let i = index" [value]="que.externalId" [disabled]="que.externalId==question.externalId">{{que.externalId}}</mat-option>
        </mat-select> matInput-->
      </div>
    </div>
  </div>

  <hr>
  <div class="form-group">
    <mat-checkbox [(ngModel)]="question.file.required">File Required</mat-checkbox>
  </div>
  <div class="form-group" *ngIf="question.file.required">
    <mat-form-field class="col-md-6">
      <mat-select [(ngModel)]="question.file.type" placeholder="File Type" multiple>
        <mat-option *ngFor="let type of typeList" [value]="type">{{type}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-checkbox class="col-md-6" [(ngModel)]="question.file.caption">Caption</mat-checkbox>
    <div class="row">
      <div class="col">
        <input type="number" class="form-control" [(ngModel)]="question.file.minCount" placeholder="Minimum number of files">
      </div>
      <div class="col">
        <input type="number" class="form-control" [(ngModel)]="question.file.maxCount" placeholder="Maximum number of files">
      </div>

    </div>
  </div>

  <hr>
  <div class="form-group">
    <label>Validation</label>
    <div class="form-group">
      <mat-checkbox class="col-md-6" [(ngModel)]="question.validation.required">Answer Required</mat-checkbox>
      <mat-checkbox class="col-md-6" [(ngModel)]="question.validation.isNumber" (change)="question.validation.regex = question.validation.isNumber?'^[0-9\s]*$':''">Is
        Number</mat-checkbox>
      <mat-checkbox [(ngModel)]="question.canBeNotApplicable">Can be not applicable ?</mat-checkbox>
    </div>
  </div>

  <hr>
  <div class="form-group">
    <div class="form-group">
      <label for="questionType">Question Group</label>
      <mat-select class="form-control" [(ngModel)]="question.questionGroup" id="questionType" multiple>
        <mat-option value="A1">A1 (All)</mat-option>
        <mat-option value="A2">A2 (All (if applicable))</mat-option>
        <mat-option value="A3">A3 (All Govt.)</mat-option>
        <mat-option value="A4">A4 (All Private)</mat-option>
        <mat-option value="A5">A5 (All (6th-12th))</mat-option>
        <mat-option value="A6">A6 (All (Nursery-5th))</mat-option>
        <mat-option value="A7">A7 (Govt. DOE (6th-12th))</mat-option>
        <mat-option value="A8">A8 (Private (Nursery-5th))</mat-option>
        <mat-option value="A9">A9 (Private (Nursery-8th/10th))</mat-option>
      </mat-select>
    </div>
  </div>

  <div class="form-group">
    <div class="form-group">
      <label for="modeOfCollection">Mode of Collection</label>
      <mat-select class="form-control" [(ngModel)]="question.modeOfCollection" id="modeOfCollection">
        <mat-option value="onfield">On Field</mat-option>
        <mat-option value="oncall">On Call</mat-option>
      </mat-select>
    </div>
  </div>


  <div class="form-group">
    <mat-form-field class="col-md-6">
      <mat-select [(ngModel)]="question.questionType" placeholder="Question Type">
        <mat-option value="auto">Auto</mat-option>
        <mat-option value="Manual">Manual</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <hr>

  <div class="form-group">
    <mat-form-field class="col-md-6">
      <mat-select [(ngModel)]="question.accessibility" placeholder="Accessibility">
        <mat-option *ngFor="let accessibility of ['local','global']" [value]="accessibility">{{accessibility}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-checkbox class="col-md-6" [(ngModel)]="question.showRemarks">Show Remarks</mat-checkbox>
  </div>
  <button type="button" class=" btn btn-outline-dark btn-sm" (click)="save()">
    save
  </button>
  <button type="button" class=" btn btn-outline-dark btn-sm" (click)="cancel()">
    cancel
  </button>
</div>